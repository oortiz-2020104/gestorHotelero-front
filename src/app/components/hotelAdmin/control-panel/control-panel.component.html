<app-navbar></app-navbar>

<div class="text-center m-3">
    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalAddHotel">Agregar hotel</button>
    <div class="input-group mx-auto w-25 mt-2 ">
        <input [(ngModel)]="searchHotel" type="text" class="form-control" placeholder="Buscar hotel"
            aria-describedby="btnSearch">
    </div>
</div>

<hr>

<div class="d-flex flex-column">
    <div *ngFor="let hotel of hotels | searchHotel:searchHotel" class="card mb-3 mx-auto" style="max-width: 60%;">
        <div class="row g-0">
            <div class="col-md-4">
                <img *ngIf="hotel.hasOwnProperty('image') == false"
                    src="../../../../assets/dummy_2000x1500_ffffff_cccccc_-no-image.jpg" class="img-fluid rounded">
                <img *ngIf="hotel.image" src="http://localhost:3200/hotel/getImageHotel/{{ hotel.image }}"
                    crossorigin="anonymous" class="img-fluid rounded" style="height: 100%;">
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title h2">{{ hotel.name }}</h5>
                    <p class="card-subtitle mt-2"> Teléfono: {{ hotel.phone }} </p>
                    <p class="card-text">Dirección: {{ hotel.address }}</p>

                    <hr>

                    <div class="d-flex justify-content-center flex-wrap m-1">
                        <button class="btn btn-primary m-1 px-4">Habitaciones</button>
                        <button class="btn btn-primary m-1 px-4">Servicios</button>
                        <button class="btn btn-primary m-1 px-4">Eventos</button>
                        <button class="btn btn-primary m-1 px-4">Cambiar foto</button>
                    </div>

                    <div class="d-flex justify-content-center flex-wrap m-1">
                        <button (click)="getHotel(hotel._id)" class="btn btn-warning m-1 px-4"
                            data-bs-toggle="offcanvas" data-bs-target="#offcanvasGetHotel"
                            aria-controls="offcanvasGetHotel">Editar</button>
                        <button (click)="deleteHotel(hotel._id)" class="btn btn-danger m-1 px-4">Eliminar</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Modal add hotel-->
<div class="modal fade" id="modalAddHotel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Agregar hotel</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form #addHotelForm="ngForm" (ngSubmit)="addHotel(addHotelForm)">
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input [(ngModel)]="hotel.name" name="name" type="text" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Dirección</label>
                        <input [(ngModel)]="hotel.address" name="address" type="text" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Teléfono</label>
                        <input [(ngModel)]="hotel.phone" placeholder="+502 ---- ----" name="phone" type="text"
                            class="form-control">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Descartar</button>
                        <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Agregar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas get hotel-->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasGetHotel" aria-labelledby="offcanvasGetHotel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasGetHotel">Editar hotel</h5>
        <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
        <form (ngSubmit)="updateHotel()" *ngIf="hotelGetId">
            <div class="mb-3">
                <label class="form-label">Nombre</label>
                <input [(ngModel)]="hotelGetId.name" name="name" type="text" class="form-control">
            </div>
            <div class="mb-3">
                <label class="form-label">Tipo de empresa</label>
                <input [(ngModel)]="hotelGetId.address" name="address" type="text" class="form-control">
            </div>
            <div class="mb-3">
                <label class="form-label">Nombre de usuario</label>
                <input [(ngModel)]="hotelGetId.phone" name="phone" type="text" class="form-control">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="offcanvas">Descartar cambios</button>
                <button type="submit" class="btn btn-primary" data-bs-dismiss="offcanvas">Actualizar cambios</button>
            </div>
        </form>
    </div>
</div>